{"version":3,"file":"User.js","names":["mongoose","require","bcrypt","userSchema","Schema","firstName","type","String","required","trim","lastName","email","unique","lowercase","password","minlength","role","enum","default","phone","isActive","Boolean","lastLogin","Date","timestamps","pre","next","isModified","salt","genSalt","hash","error","methods","comparePassword","candidatePassword","compare","module","exports","model"],"sources":["../../src/models/User.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst bcrypt = require('bcryptjs');\n\nconst userSchema = new mongoose.Schema({\n  firstName: {type: String, required: true, trim: true },\n  lastName: {type: String, required: true, trim: true },\n  email: {type: String, required: true, unique: true, trim: true, lowercase: true },\n  password: {type: String, required: true, minlength: 6 },\n  role: {type: String, enum: ['admin', 'medecin', 'infirmier', 'secretaire'], default: 'secretaire'},\n  phone: {type: String, trim: true },\n  isActive: {type: Boolean, default: true},\n  lastLogin: {type: Date}\n}, {\n  timestamps: true\n});\n\n// Hacher le mot de passe avant de sauvegarder\nuserSchema.pre('save', async function(next) {\n  if (!this.isModified('password')) return next();\n  \n  try {\n    const salt = await bcrypt.genSalt(10);\n    this.password = await bcrypt.hash(this.password, salt);\n    next();\n  } catch (error) {\n    next(error);\n  }\n});\n\n// Méthode pour vérifier le mot de passe\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n  return await bcrypt.compare(candidatePassword, this.password);\n};\n\nmodule.exports = mongoose.model('User', userSchema);\n"],"mappings":"aAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,MAAM,GAAGD,OAAO,CAAC,UAAU,CAAC;;AAElC,MAAME,UAAU,GAAG,IAAIH,QAAQ,CAACI,MAAM,CAAC;EACrCC,SAAS,EAAE,EAACC,IAAI,EAAEC,MAAM,EAAEC,QAAQ,EAAE,IAAI,EAAEC,IAAI,EAAE,IAAI,CAAC,CAAC;EACtDC,QAAQ,EAAE,EAACJ,IAAI,EAAEC,MAAM,EAAEC,QAAQ,EAAE,IAAI,EAAEC,IAAI,EAAE,IAAI,CAAC,CAAC;EACrDE,KAAK,EAAE,EAACL,IAAI,EAAEC,MAAM,EAAEC,QAAQ,EAAE,IAAI,EAAEI,MAAM,EAAE,IAAI,EAAEH,IAAI,EAAE,IAAI,EAAEI,SAAS,EAAE,IAAI,CAAC,CAAC;EACjFC,QAAQ,EAAE,EAACR,IAAI,EAAEC,MAAM,EAAEC,QAAQ,EAAE,IAAI,EAAEO,SAAS,EAAE,CAAC,CAAC,CAAC;EACvDC,IAAI,EAAE,EAACV,IAAI,EAAEC,MAAM,EAAEU,IAAI,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,WAAW,EAAE,YAAY,CAAC,EAAEC,OAAO,EAAE,YAAY,EAAC;EAClGC,KAAK,EAAE,EAACb,IAAI,EAAEC,MAAM,EAAEE,IAAI,EAAE,IAAI,CAAC,CAAC;EAClCW,QAAQ,EAAE,EAACd,IAAI,EAAEe,OAAO,EAAEH,OAAO,EAAE,IAAI,EAAC;EACxCI,SAAS,EAAE,EAAChB,IAAI,EAAEiB,IAAI;AACxB,CAAC,EAAE;EACDC,UAAU,EAAE;AACd,CAAC,CAAC;;AAEF;AACArB,UAAU,CAACsB,GAAG,CAAC,MAAM,EAAE,gBAAeC,IAAI,EAAE;EAC1C,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI,CAAC,CAAC;;EAE/C,IAAI;IACF,MAAME,IAAI,GAAG,MAAM1B,MAAM,CAAC2B,OAAO,CAAC,EAAE,CAAC;IACrC,IAAI,CAACf,QAAQ,GAAG,MAAMZ,MAAM,CAAC4B,IAAI,CAAC,IAAI,CAAChB,QAAQ,EAAEc,IAAI,CAAC;IACtDF,IAAI,CAAC,CAAC;EACR,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdL,IAAI,CAACK,KAAK,CAAC;EACb;AACF,CAAC,CAAC;;AAEF;AACA5B,UAAU,CAAC6B,OAAO,CAACC,eAAe,GAAG,gBAAeC,iBAAiB,EAAE;EACrE,OAAO,MAAMhC,MAAM,CAACiC,OAAO,CAACD,iBAAiB,EAAE,IAAI,CAACpB,QAAQ,CAAC;AAC/D,CAAC;;AAEDsB,MAAM,CAACC,OAAO,GAAGrC,QAAQ,CAACsC,KAAK,CAAC,MAAM,EAAEnC,UAAU,CAAC","ignoreList":[]}