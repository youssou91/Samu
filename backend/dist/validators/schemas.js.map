{"version":3,"file":"schemas.js","names":["Joi","require","objectId","createUser","body","object","keys","nom","string","required","min","max","trim","prenom","email","lowercase","telephone","pattern","role","valid","default","motDePasse","confirmMotDePasse","ref","dateNaissance","date","adresse","rue","codePostal","ville","pays","login","createRendezVous","patientId","custom","patientNom","patientTelephone","medecinId","medecinNom","dateDebut","iso","dateFin","greater","type","motif","notes","updateRendezVous","params","id","statut","presenceConfirmee","boolean","heureArrivee","resetPassword","token","forgotPassword","objectIdParam","pagination","query","page","number","integer","limit","sortBy","sortOrder","search","module","exports"],"sources":["../../src/validators/schemas.js"],"sourcesContent":["const Joi = require('joi');\nconst { objectId } = require('./custom.validation');\n\n// Schéma pour la création d'un utilisateur\nconst createUser = {\n  body: Joi.object().keys({\n    nom: Joi.string().required().min(2).max(100).trim(),\n    prenom: Joi.string().required().min(2).max(100).trim(),\n    email: Joi.string().required().email().trim().lowercase(),\n    telephone: Joi.string().pattern(/^[0-9]{10}$/).required(),\n    role: Joi.string().valid('patient', 'medecin', 'secretaire', 'admin').default('patient'),\n    motDePasse: Joi.string().required().min(8).max(100),\n    confirmMotDePasse: Joi.string().valid(Joi.ref('motDePasse')).required(),\n    dateNaissance: Joi.date().max('now'),\n    adresse: Joi.object({\n      rue: Joi.string().required(),\n      codePostal: Joi.string().required(),\n      ville: Joi.string().required(),\n      pays: Joi.string().default('France'),\n    }),\n  }),\n};\n\n// Schéma pour la connexion\nconst login = {\n  body: Joi.object().keys({\n    email: Joi.string().required().email().trim().lowercase(),\n    motDePasse: Joi.string().required(),\n  }),\n};\n\n// Schéma pour la création d'un rendez-vous\nconst createRendezVous = {\n  body: Joi.object().keys({\n    patientId: Joi.string().custom(objectId).required(),\n    patientNom: Joi.string().required().trim(),\n    patientTelephone: Joi.string().required().trim(),\n    medecinId: Joi.string().custom(objectId).required(),\n    medecinNom: Joi.string().required().trim(),\n    dateDebut: Joi.date().iso().required(),\n    dateFin: Joi.date().iso().greater(Joi.ref('dateDebut')).required(),\n    type: Joi.string().valid('consultation', 'controle', 'urgence', 'autre').required(),\n    motif: Joi.string().max(1000).trim(),\n    notes: Joi.string().max(2000).trim(),\n  }),\n};\n\n// Schéma pour la mise à jour d'un rendez-vous\nconst updateRendezVous = {\n  params: Joi.object().keys({\n    id: Joi.string().custom(objectId).required(),\n  }),\n  body: Joi.object()\n    .keys({\n      statut: Joi.string().valid(\n        'en_attente',\n        'confirme',\n        'en_cours',\n        'termine',\n        'annule',\n        'rate',\n        'en_retard'\n      ),\n      dateDebut: Joi.date().iso(),\n      dateFin: Joi.date().iso().greater(Joi.ref('dateDebut')),\n      type: Joi.string().valid('consultation', 'controle', 'urgence', 'autre'),\n      motif: Joi.string().max(1000).trim(),\n      notes: Joi.string().max(2000).trim(),\n      presenceConfirmee: Joi.boolean(),\n      heureArrivee: Joi.date().iso(),\n    })\n    .min(1), // Au moins un champ doit être fourni pour la mise à jour\n};\n\n// Schéma pour la réinitialisation du mot de passe\nconst resetPassword = {\n  params: Joi.object().keys({\n    token: Joi.string().required(),\n  }),\n  body: Joi.object().keys({\n    motDePasse: Joi.string().required().min(8).max(100),\n    confirmMotDePasse: Joi.string().valid(Joi.ref('motDePasse')).required(),\n  }),\n};\n\n// Schéma pour la demande de réinitialisation du mot de passe\nconst forgotPassword = {\n  body: Joi.object().keys({\n    email: Joi.string().required().email().trim().lowercase(),\n  }),\n};\n\n// Schéma pour la validation des IDs MongoDB\nconst objectIdParam = {\n  params: Joi.object().keys({\n    id: Joi.string().custom(objectId).required(),\n  }),\n};\n\n// Schéma pour la pagination et le filtrage\nconst pagination = {\n  query: Joi.object().keys({\n    page: Joi.number().integer().min(1).default(1),\n    limit: Joi.number().integer().min(1).max(100).default(10),\n    sortBy: Joi.string(),\n    sortOrder: Joi.string().valid('asc', 'desc').default('asc'),\n    search: Joi.string(),\n    statut: Joi.string(),\n    dateDebut: Joi.date().iso(),\n    dateFin: Joi.date().iso(),\n    medecinId: Joi.string().custom(objectId),\n    patientId: Joi.string().custom(objectId),\n  }),\n};\n\nmodule.exports = {\n  createUser,\n  login,\n  createRendezVous,\n  updateRendezVous,\n  resetPassword,\n  forgotPassword,\n  objectIdParam,\n  pagination,\n};\n"],"mappings":"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","ignoreList":[]}